<ng-container *ngIf="form; else loading">
  <form
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    class="container-max-width-xs pt-4"
  >
    <div class="mt-3">
      <label for="username">Enter your username</label>
      <input
        class="w-full block"
        type="text"
        pInputText
        formControlName="username"
      />
      <ng-container *ngIf="form.get('username') as control">
        <ul *ngIf="control.touched || control.dirty" class="text-pink-500 text-sm">
          <li *ngIf="control.errors?.['required']">Username is required</li>
          <li *ngIf="control.errors?.['minlength'] || control.errors?.['maxlength']">
            Username must be at least 5 characters long and less than 15
          </li>
        </ul>
      </ng-container>
    </div>

    <div class="mt-3">
      <label for="password">Enter your password</label>
      <input
        id="password"
        class="w-full block"
        type="text"
        pInputText
        formControlName="password"
      />
      <ng-container *ngIf="form.get('password') as control">
        <ul *ngIf="control.touched || control.dirty" class="text-pink-500 text-sm">
          <li *ngIf="control.errors?.['required']">Password is required</li>
          <li *ngIf="control.errors?.['minlength']">
            Password must be at least 5 characters long
          </li>
        </ul>
      </ng-container>
    </div>

    <div class="mt-3">
      <label for="calendar">Your Birthday</label>
      <p-calendar id="calendar" styleClass="w-full" formControlName="birthday">
      </p-calendar>
    </div>

    <div class="mt-3">
      <p-checkbox
        [formControl]="$any(form).controls['agree']"
        label="Agree to Terms and Conditions"
        [value]="isAgree"
        (onChange)="isAgreement()"
      ></p-checkbox>
    </div>
    <div class="mt-3">
      <p-button
        [disabled]="!form.valid"
        styleClass="w-full"
        type="submit"
        label="Submit"
      ></p-button>
    </div>
  </form>
</ng-container>
<ng-template #loading>
  <p-progressSpinner></p-progressSpinner>
</ng-template>
